<!--
  The Side Bar
  v2.0
  https://github.com/cotes2020/jekyll-theme-chirpy
  Â© 2019 Cotes Chung
  MIT License
-->

<aside id="sidebar" class="d-flex flex-column align-items-end">
  <header class="profile-wrapper">
    <a href="{{ '/' | relative_url }}" id="avatar" class="rounded-circle">
      {% if site.avatar != '' and site.avatar %} {%- capture avatar_url -%} {%
      if site.avatar contains '://' %} {{ site.avatar }} {% elsif
      site.cdn.enabled and site.assets.self_host.enabled == false %} {{
      site.cdn.url | append: site.avatar }} {% else %} {{ site.avatar |
      relative_url }} {% endif %} {%- endcapture -%}
      <img
        src="{{ avatar_url | strip }}"
        width="112"
        height="112"
        alt="avatar"
        onerror="this.style.display='none'"
      />
      {% endif %}
    </a>

    <h1 class="site-title">
      <a href="{{ '/' | relative_url }}">{{ site.title }}</a>
    </h1>
    <p class="site-subtitle fst-italic mb-0">{{ site.tagline }}</p>
  </header>
  <!-- .profile-wrapper -->

  <nav class="flex-fill">
    <ul class="nav">
      {% for tab in site.tabs %}
      <li
        class="nav-item{% if tab.url == page.url or page.collection == 'posts' and tab.url == '/categories/' and page.category == tab.name or page.collection == 'posts' and tab.url == '/tags/' and page.tag == tab.name %} active{% endif %}"
      >
        <a class="nav-link" href="{{ tab.url | relative_url }}">
          <i class="fa-fw {{ tab.icon }}"></i>
          <span>{{ tab.title | default: tab.name }}</span>
        </a>
      </li>
      <!-- .nav-item -->
      {% endfor %}
    </ul>
  </nav>
  <!-- .nav -->

  <!-- Categories Section -->
  <div class="sidebar-section mt-3 w-100">
    <div
      class="sidebar-section-title fs-6 text-muted fw-bold text-uppercase ps-4 pt-2 pb-1"
    >
      Categories
    </div>
    <ul class="nav flex-column">
      {% for category in site.categories %}
      <li class="nav-item">
        <a
          class="nav-link d-flex justify-content-between"
          href="{{ '/categories/' | append: (category[0] | slugify) | relative_url }}"
        >
          <span>{{ category[0] }}</span>
          <span class="text-muted">{{ category[1] | size }}</span>
        </a>
      </li>
      {% endfor %}
    </ul>
  </div>

  <div
    class="sidebar-bottom d-flex flex-wrap-reverse justify-content-center align-items-center"
  >
    <span class="icon-border"></span>
    {%- for entry in site.data.contact -%} {%- include contact.html -%} {%-
    endfor -%}
  </div>
  <!-- .sidebar-bottom -->
</aside>
